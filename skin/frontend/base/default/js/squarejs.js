!function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,function(e){var r=t[s][1][e];return n(r?r:e)},u,u.exports,e,t,r,o)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,r){"use strict";function o(e,t,r){return e+(t||"")+(r||"")}var n={production:{js:"https://js.squareup.com",service:"https://connect.squareup.com"},staging:{js:"https://js.squareupstaging.com",service:"https://connect.squareupstaging.com"},development:{js:"http://localhost:9090",service:"http://localhost:9090"},test:{js:"http://localhost:9090",service:"http://localhost:9090"}};t.exports=function(e){n[e]||(e="production");var t=n[e];return{name:e,jsUrl:function(e,r){return o(t.js,e,r)},serviceUrl:function(e,r){return o(t.service,e,r)}}}},{}],2:[function(e,t,r){"use strict";function o(e){this.options=e||{},this.env=this.options.env,this.source=this.options.source,this.applicationId=this.options.applicationId,this.ignoreError=0;var t=this.options.endpoint||s,r=this.options.baseURL||this.env.serviceUrl();this.url=r+t,this.options.captureUncaughtExceptions&&this.install(n.getWindow())}var n=e("./window"),i=e("./xhr"),s="/v2/js-error";t.exports=o,o.prototype.destroy=function(){this.originalOnerror&&(n.getWindow().onerror=this.originalOnerror,this.originalOnerror=null)},o.prototype.ignoreNextError=function(){this.ignoreError+=1,n.getWindow().setTimeout(function(){this.ignoreError-=1}.bind(this),0)},o.prototype.wrap=function(e){function t(){var t=[].slice.call(arguments);try{return e.apply(this,t)}catch(e){throw r.capture(e),e}}var r=this;return e.__inner__?e:(t.__inner__=e,t)},o.prototype.capture=function(e){(e.name||e.message)&&"development"!==this.env.name&&(this.ignoreNextError(),this._send(this._createPayload(e.name,e.message,e.fileName||"[unknown]",e.lineNumber||-1,e.stack)))},o.prototype.install=function(e){e.__error_logger__||(e.__error_logger__=!0,this.originalOnerror=e.onerror,e.onerror=function(t,r,o,n,i){if(!this.ignoreError&&!/Script error/.test(t))return this.capture(i),"function"==typeof this.originalOnerror&&this.originalOnerror.apply(e,[].slice.call(arguments))}.bind(this))},o.prototype._createPayload=function(e,t,r,o,i){var s=n.getWindow(),a={app_id:this.applicationId,timestamp:Date.now(),type:e,message:t,stack:i,ua:s.navigator.userAgent,host:s.location.hostname,source:this.source};return a},o.prototype._send=function(e){i.post(this.url,{json:e},this._handleResponse.bind(this))},o.prototype._handleResponse=function(){}},{"./window":10,"./xhr":11}],3:[function(e,t,r){"use strict";function o(e){return"https://docs.connect.squareup.com/articles/adding-payment-form/"+(e||"")}var n=o("#settinguppaymentform"),i=o("#stylingcardform");t.exports={ELEMENT_NOT_FOUND:function(e){return"SqPaymentForm element with id `"+e+"` not found. Has the DOM finished loading?\nSee: "+o("#generatingpaymentform")},HTTPS:"SqPaymentForm can only be embedded on sites that use HTTPS. See: "+o(),BUILD_AFTER_DESTROY:"Cannot call SqPaymentForm#build after SqPaymentForm#destroy. Create a new SqPaymentForm instance instead.",NONCE_AFTER_DESTROY:"Cannot call SqPaymentForm#requestCardNonce after SqPaymentForm#destroy. Create a new SqPaymentForm instance instead.",NONCE_BEFORE_READY:"Cannot call SqPaymentForm#requestCardNonce before SqPaymentForm is ready. See: "+o("#sqpaymentformcallbacks"),REBUILD:"SqPaymentForm#build called more than once. Did you mean to call SqPaymentForm#destroy first?\nSee: "+o("#destroyingpaymentform"),OPTIONS_INVALID:"The SqPaymentForm `options` argument must be an object.\nSee: "+n,OPTIONS_MISSING:"The SqPaymentForm `options` argument is required.\nSee: "+n,OPTION_INVALID:function(e){return"The SqPaymentForm `"+e+"` option value is invalid.\n See: "+n},OPTION_MISSING:function(e){return"The SqPaymentForm `"+e+"` option is required.\n See: "+n},ELEMENT_ID_MISSING:function(e){return"The SqPaymentForm `elementId` option is required for `"+e+"`.\n See: "+n},INPUT_TYPE_MISSING:function(e){return this.OPTION_MISSING(e)},NONCE_CALLBACK_MISSING:"The SqPaymentForm `cardNonceResponseReceived` callback is required.\nSee: "+n,NONCE_CALLBACK_INVALID:"The SqPaymentForm `cardNonceResponseReceived` callback must be a function.\nSee: "+n,INPUT_STYLES_INVALID:"The SqPaymentForm `inputStyles` option must be an array.\nSee: "+n,PROPERTY_INVALID:function(e){return"Invalid InputStyle property: `"+e+"`.\nSee: "+i},VALUE_INVALID:function(e,t){return"Invalid InputStyle value `"+e+"` for property `"+t+"`.\nSee: "+i},BROWSER:"Browser not supported.\nSee: "+o("#unsupportedbrowsers")}},{}],4:[function(e,t,r){"use strict";t.exports={getHash:function(){return"eyJzIjoiNGI5ZDZhODQiLCJiIjoxNDgwNjE2OTExNzk0LCJ2IjoiMC4xLjEifQ=="}}},{}],5:[function(e,t,r){"use strict";var o=e("../window");o.getWindow().SqPaymentForm=e("./sq-payment-form")},{"../window":10,"./sq-payment-form":8}],6:[function(e,t,r){"use strict";function o(e){this.options=e,this.env=e.env,this.errorLogger=e.errorLogger,this.iframeControllers={},this.loadedIframes=[]}var n=e("../errors"),i=e("./sq-iframe-controller"),s=e("../util"),a=e("../window");o.RESIZE_TIMEOUT_MS=250,o.INPUT_TYPES={CARD_NUMBER:"cardNumber",CVV:"cvv",EXPIRATION_DATE:"expirationDate",POSTAL_CODE:"postalCode"},o.prototype.build=function(){Object.keys(this.iframeControllers).length>0||(this.buildIframeControllers(),this.addPostMessageEventListeners(),this.addTouchStartEventListener(),this.addResizeEventListener())},o.prototype.buildIframeControllers=function(){for(var e in o.INPUT_TYPES){var t=o.INPUT_TYPES[e];this.buildIframeController(t)}},o.prototype.buildIframeController=function(e){var t=this.options[e].elementId,r=a.getDocument().getElementById(t);if(!r)throw new Error(n.ELEMENT_NOT_FOUND(t));var o=s.cloneObject(this.options[e]);o.inputClass=this.options.inputClass,o.inheritedClassName=r.className,o.env=this.env,this.iframeControllers[e]=new i(e,o,this.iframeCallbacks()),this.iframeControllers[e].originalElement=r,r.parentElement.replaceChild(this.iframeControllers[e].element,r)},o.prototype.destroy=function(){this.removePostMessageEventListeners(),this.removeTouchStartEventListener(),this.removeResizeEventListener();for(var e in this.iframeControllers)this.iframeControllers[e].destroy(),delete this.iframeControllers[e]},o.prototype.iframeCallbacks=function(){var e=function(e){this.addLoadedFrame(e)}.bind(this);return{onload:e}},o.prototype.addLoadedFrame=function(e){this.loadedIframes.indexOf(e)===-1&&this.loadedIframes.push(e),this.loadedIframes.length===Object.keys(o.INPUT_TYPES).length&&this.loadFormController()},o.prototype.addLogoIframe=function(e){var t=a.getDocument().createElement("iframe");t.src=this.env.serviceUrl("/v2/logo.html","?s="+encodeURIComponent(e||"")),t.id="sq-logo",t.width="0",t.height="0",t.frameBorder="0",t.tabIndex="-1";var r=this.iframeControllers.postalCode.element;r.parentNode.insertBefore(t,r.nextSibling)},o.prototype.receiveMessageCallback=function(e){var t;switch(e.data.eventName){case"cardNonceResponseReceived":this.options.callbacks&&"function"==typeof this.options.callbacks.cardNonceResponseReceived&&this.options.callbacks.cardNonceResponseReceived(e.data.value.errors,e.data.value.card_nonce,e.data.value.card);break;case"inputEventReceived":var r=this.iframeControllers[e.data.inputEvent.field];switch(e.data.inputEvent.eventType){case"errorClassAdded":t=this.classNameForClassType("error"),r.addClass(t);break;case"errorClassRemoved":t=this.classNameForClassType("error"),r.removeClass(t);break;case"focusClassAdded":t=this.classNameForClassType("focus"),r.addClass(t);break;case"focusClassRemoved":t=this.classNameForClassType("focus"),r.removeClass(t)}this.options.callbacks&&"function"==typeof this.options.callbacks.inputEventReceived&&this.options.callbacks.inputEventReceived(e.data.inputEvent);break;case"setInputHeight":var o=this.iframeControllers[e.data.inputType].element;o.setAttribute("height",e.data.inputHeight);break;case"setSessionId":break;case"paymentFormLoaded":this.options.callbacks&&"function"==typeof this.options.callbacks.paymentFormLoaded&&this.options.callbacks.paymentFormLoaded()}},o.prototype.updateStylesOnResize=function(){clearTimeout(this.fireOnResizeEnd),this.fireOnResizeEnd=setTimeout(this.buildStylesForScreenWidth.bind(this),o.RESIZE_TIMEOUT_MS)},o.prototype.addPostMessageEventListeners=function(){this._messageCallback=this.receiveMessageCallback.bind(this),a.getWindow().addEventListener("message",this._messageCallback)},o.prototype.removePostMessageEventListeners=function(){a.getWindow().removeEventListener("message",this._messageCallback)},o.prototype.addTouchStartEventListener=function(){this._touchstartCallback=this.blurAllInputs.bind(this),a.getWindow().addEventListener("touchstart",this._touchstartCallback)},o.prototype.removeTouchStartEventListener=function(){a.getWindow().removeEventListener("touchstart",this._touchstartCallback)},o.prototype.addResizeEventListener=function(){this._resizeCallback=this.updateStylesOnResize.bind(this),a.getWindow().addEventListener("resize",this._resizeCallback)},o.prototype.removeResizeEventListener=function(){a.getWindow().removeEventListener("resize",this._resizeCallback)},o.prototype.classNameForClassType=function(e){return this.options.inputClass+"--"+e},o.prototype.loadFormController=function(){var e={eventName:"loadFormController",iframes:i.IFRAME_NAMES,options:{envName:this.env.name,applicationId:this.options.applicationId,cardNumber:this.options.cardNumber,cvv:this.options.cvv,expirationDate:this.options.expirationDate,postalCode:this.options.postalCode,inputStyles:this.options.inputStyles},initialScreenWidth:a.getWindow().innerWidth};this.iframeControllers.cardNumber.element.contentWindow.postMessage(e,"*")},o.prototype.requestCardNonceIfValidForm=function(){this.iframeControllers.cardNumber.element.contentWindow.postMessage({eventName:"requestCardNonceIfValidForm"},"*")},o.prototype.buildStylesForScreenWidth=function(){this.iframeControllers.cardNumber.element.contentWindow.postMessage({eventName:"buildStylesForScreenWidth",screenWidth:a.getWindow().innerWidth},"*")},o.prototype.blurAllInputs=function(){this.iframeControllers.cardNumber.element.contentWindow.postMessage({eventName:"blurAllInputs"},"*")},o.prototype.setPostalCode=function(e){var t=typeof e;"string"!==t&&"number"!==t||this.iframeControllers.cardNumber.element.contentWindow.postMessage({eventName:"setPostalCode",postalCode:""+e},"*")},t.exports=o},{"../errors":3,"../util":9,"../window":10,"./sq-iframe-controller":7}],7:[function(e,t,r){"use strict";function o(e,t,r){this.type=e,this.options=t,this.callbacks=r,this.env=this.options.env,this.element=n.getDocument().createElement("iframe"),this.element.onload=this.onload.bind(this),this.setDefaultAttributes()}var n=e("../window");o.IFRAME_NAMES={cardNumber:"sq-card-number-iframe",cvv:"sq-cvv-iframe",expirationDate:"sq-expiration-date-iframe",postalCode:"sq-postal-code-iframe"},o.prototype.onload=function(){"function"==typeof this.callbacks.onload&&this.callbacks.onload(this.type)},o.prototype.destroy=function(){this.element.parentNode&&this.element.parentNode.replaceChild(this.originalElement,this.element),this.originalElement=null,this.element=null},o.prototype.setDefaultAttributes=function(){var e=this.element,t=o.IFRAME_NAMES[this.type];e.setAttribute("id",this.options.elementId),e.setAttribute("name",t),e.setAttribute("class",this.combinedClassName()),e.setAttribute("frameBorder","0"),e.setAttribute("width","100%"),e.setAttribute("scrolling","no"),e.setAttribute("height",this.estimatedInputHeight()),e.setAttribute("src",this.iframeSRC())},o.prototype.combinedClassName=function(){var e=[];return this.options.inputClass&&e.push(this.options.inputClass),this.options.inheritedClassName&&e.push(this.options.inheritedClassName),e.join(" ")},o.prototype.estimatedInputHeight=function(){return 15},o.prototype.iframeSRC=function(){return this.env.serviceUrl("/v2/iframe",this.queryString())},o.prototype.queryString=function(){return"?type="+this.type},o.prototype.addClass=function(e){this.element.classList.add(e)},o.prototype.removeClass=function(e){this.element.classList.remove(e)},t.exports=o},{"../window":10}],8:[function(e,t,r){"use strict";function o(e){this.options=e,this.env=l(e?e.env:"production"),this.errorLogger=new n({applicationId:this.options&&this.options.applicationId,captureUncaughtExceptions:!1,source:"SqPaymentForm",env:this.env});var t=this.validateOptions(this.options);if(t)throw this.errorLogger.capture(t),t;if(0===this.options.applicationId.indexOf("sandbox-")){var r="https://docs.connect.squareup.com/articles/using-sandbox/";console.log("SqPaymentForm initialized in Sandbox Mode. See "+r)}if(!c.embeddingAllowed(this.env,u.getWindow().location)){var o=new Error(a.HTTPS);throw this.errorLogger.capture(o),o}var p=c.cloneObject(this.options);p.env=this.env,p.errorLogger=this.errorLogger,this.clientController=new i(p),"loading"===u.getReadyState()&&(this._handleDomContentLoaded=this.build.bind(this),u.getDocument().addEventListener("DOMContentLoaded",this._handleDomContentLoaded)),d.post(this.env.serviceUrl("/v2/v"),{json:{a:this.options.applicationId,d:s.getHash(),t:Date.now(),s:"SqPaymentForm"}})}var n=e("../error-logger"),i=e("./sq-client-controller"),s=e("./hash"),a=e("../errors"),l=e("../env"),c=e("../util"),u=e("../window"),d=e("../xhr");o.prototype.build=function(){if(this.detachLoadEvent(),this.build=function(){var e=Error(a.REBUILD);throw this.errorLogger.capture(e),e},!c.isSupportedBrowser())return this.errorLogger.capture(new Error(a.BROWSER)),void(this.options.callbacks&&"function"==typeof this.options.callbacks.unsupportedBrowserDetected&&this.options.callbacks.unsupportedBrowserDetected());try{this.clientController.build()}catch(e){throw this.errorLogger.capture(e),e}},o.prototype.destroy=function(){this.detachLoadEvent(),this.clientController&&(this.clientController.destroy(),this.clientController=null),this.errorLogger.destroy(),this.errorLogger=null,this.build=function(){throw new Error(a.BUILD_AFTER_DESTROY)},this.requestCardNonce=function(){throw new Error(a.NONCE_AFTER_DESTROY)}},o.prototype.requestCardNonce=function(){if(!this.clientController){var e=new Error(a.NONCE_BEFORE_READY);throw this.errorLogger.capture(e),e}this.clientController.requestCardNonceIfValidForm()},o.prototype.setPostalCode=function(e){this.clientController.setPostalCode(e)},o.prototype.detachLoadEvent=function(){this._handleDomContentLoaded&&(u.getDocument().removeEventListener("DOMContentLoaded",this._handleDomContentLoaded),this._handleDomContentLoaded=null)},o.prototype.validateOptions=function(e){if(!e)return new Error(a.OPTIONS_MISSING);if("[object Object]"!==Object.prototype.toString.call(e))return new Error(a.OPTIONS_INVALID);if(!e.applicationId)return new Error(a.OPTION_MISSING("applicationId"));if(!e.inputClass)return new Error(a.OPTION_MISSING("inputClass"));if(e.inputClass.indexOf(" ")!==-1)return new Error(a.OPTION_INVALID("inputClass"));if(!e.callbacks)return new Error(a.OPTION_MISSING("callbacks"));for(var t,r=Object.keys(i.INPUT_TYPES),o=0;o<r.length,t=r[o];o+=1){var n=i.INPUT_TYPES[t];if(!e[n])return new Error(a.INPUT_TYPE_MISSING(n));if(!e[n].elementId)return new Error(a.ELEMENT_ID_MISSING(n))}return e.callbacks.cardNonceResponseReceived?"function"!=typeof e.callbacks.cardNonceResponseReceived?new Error(a.NONCE_CALLBACK_INVALID):e.inputStyles&&!Array.isArray(e.inputStyles)?new Error(a.INPUT_STYLES_INVALID):void 0:new Error(a.NONCE_CALLBACK_MISSING)},t.exports=o},{"../env":1,"../error-logger":2,"../errors":3,"../util":9,"../window":10,"../xhr":11,"./hash":4,"./sq-client-controller":6}],9:[function(e,t,r){"use strict";var o=e("./window");t.exports.embeddingAllowed=function(e,t){return/localhost$/.test(t.hostname)||"development"===e.name||"file:"===t.protocol||"https:"===t.protocol},t.exports.isSupportedBrowser=function(){var e=o.getWindow(),t=o.getDocument();return void 0!==e.postMessage&&void 0!==e.XMLHttpRequest&&void 0!==t.createElement("a").classList},t.exports.cloneObject=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}},{"./window":10}],10:[function(e,t,r){"use strict";t.exports={getWindow:function(){return window},getDocument:function(){return window.document},getReadyState:function(){return this.getDocument().readyState},getSiblingIframe:function(e){return window.parent.frames[e]}}},{}],11:[function(e,t,r){"use strict";r.TIMEOUT_MS=1e4,r.post=function(e,t,o){o||"function"!=typeof t||(o=t,t={}),t||(t={}),"function"!=typeof o&&(o=function(){});var n=new XMLHttpRequest;if(n.open("POST",e,!0),n.timeout=t.timeout||r.TIMEOUT_MS,t.headers)for(var i in t.headers)n.setRequestHeader(i,t.headers[i]);t.json&&(n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-Type","application/json; charset=utf-8")),n.onerror=function(){o(new Error("Unexpected error during request ("+e+")"))},n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText;if(e&&t.json)try{e=JSON.parse(e)}catch(e){return o(e)}var i={headers:r.parseHeaders(n.getAllResponseHeaders()),status:n.status,statusText:n.statusText};o(null,i,e)}},n.ontimeout=function(){o(new Error("Request timeout exceeded ("+n.timeout+"ms; "+e+")"))},t.body&&t.json&&(t.body=null),n.send(t.body||JSON.stringify(t.json))},r.parseHeaders=function(e){var t={};return e?(e.split("\r\n").forEach(function(e){var r=e.indexOf(": ");if(r>0){var o=e.substring(0,r),n=e.substring(r+2);t[o]=n}}),t):t}},{}]},{},[5]);
